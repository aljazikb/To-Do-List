<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- EXTERNAL LIBRARIES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Handjet:wght,ELSH@100..900,2&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    

    
    <style>

   /* button{
        border:none;
        font-size:20px;
        box-shadow: 0px 3px 5px rgba(168,168,168,0.3);
        

    }
    button.cirular{
        width: 40px;
        height: 40px;
        border-radius: 50%;
        line-height: 0;

        display: flex;
        align-items: center;  /* vertical centering */

    button {
        border: none;
        font-size: 20px; /* icon size */
        box-shadow: 0px 3px 5px rgba(168,168,168,0.3);
        cursor: pointer;
    }

    button.cirular {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        
        display: flex;
        align-items: center;    /* vertical centering */
        justify-content: center; /* horizontal centering */
        
        padding: 0;             /* remove default padding */
        background-color: gray;  /* default background, override inline if needed */
        color: white;            /* icon color */
    }


    .task-actions {
        display:flex;
        justify-content: space-between;
        align-items: center;
        width: 20%;
    
        
    }


    .tasks-table{
        background-color: rgb(206, 206, 206);
        width: 70%;
        margin-top: 130px;
        


    }
    

    .task{
        display: flex; background-color: rgb(241, 243, 244);
        padding: 40px;
        border-bottom: solid black 1px; 
        transition: box-shadow 0.2s;
        
    }
    .done{
        background-color: rgb(158, 253, 160);
    }

    .task:hover{
        box-shadow: 0px 3px 15px rgba(97,97,97,0.843);

    }
    
    body{
        background-color: rgb(153, 107, 196);
        /*  font import */
        font-family: "Handjet", sans-serif;
        font-optical-sizing: auto;
        font-weight: 300;
        font-style: normal;
        font-variation-settings:
        "ELGR" 1,
        "ELSH" 2;
        /* // font import  //*/
    }

    /* MOBILE */

  @media (max-width: 600px) {

    .tasks-table {
        width: 100%;
    }
     
    }


    @media(min-width: 601px){      
        .tasks-table{
            width: 100%;
            

        }
    }

    @media(min-width: 768px) and (max-width: 992px){
    .tasks-table{
        width: 100%;
    
    }
}


    </style>
</head>





<body>
    <div style="direction: rtl;">
        <!---CENTER DIV-->
        <div style="align-items: center; display: flex; justify-content: center; ">


        <!---TASKS TABLE-->
        <div class="tasks-table">


            <!-- HEADER-->
            <div style="width: 100%; text-align: center; background: rebeccapurple; color: white; padding-top: 8px;padding-bottom: 8px;">
                <h1 style="display: inline;"> Ù…Ù‡Ø§Ù…ÙŠ</h1>
                <button id="addNew"class="cirular" style="float: right; background: white; margin-right:10px;">  
                    <span class="material-symbols-outlined">
                        add
                    </span> 
                 </button>

            </div>
            <!--// HEADER//-->

            <!-- TASKS -->
             <div id="tasks" style="padding: 20px;">
                <!-- TASK -->
                 <div class="task">
                    <!--TASK INFO -->
                    <div style="width: 70%;">
                        <h2 id="title"> Ø§Ù†Ù‡Ø§Ø¡</h2>
                        <div>
                            <span class="material-symbols-outlined">
                                calendar_month
                            </span>
                            <span id="time">10/10/2004</span>
                        </div>

                    </div>
                    <!--//TASK INFO// -->   

                    <!--TASK ACTION -->
                    <div>
                        <button class="cirular" style="background-color:red;color:white;">
                        <span class="material-symbols-outlined">
                            check
                        </span>   
                        </button>

                        <button class="cirular" style="background-color: green;color: white;">
                            <span class="material-symbols-outlined">
                                delete
                            </span>
                        </button>

                        <button class="cirular" style="background-color: chocolate;color: white;">
                            <span class="material-symbols-outlined">
                                edit
                            </span>
                            </button>
                        
                    </div>
                    <!--//TASK ACTION// -->

                 </div>
                <!-- // TASK // -->

              
             </div>
             <!-- // TASKS //  -->
            
        </div>
         <!---//TASKS TABLE//-->


   
    
    </div>
     <!---//CENTER DIV//-->



  </div>




</body>




<script>

   



let tasks=[
        {
            "title":"",
            "date":"",
            "isDone":false
        }
]


 function getTaskFromStorage(){
    let retrivetasks= JSON.parse(localStorage.getItem("myTasks"))

    if(retrivetasks ==null){
        tasks=[]

    }else{ tasks =retrivetasks}
 }


getTaskFromStorage()
fillTasksOnThePage()

function fillTasksOnThePage(){
    let index=0
    
    document.getElementById("tasks").innerHTML=""

    for (const x of tasks){

    document.getElementById("tasks").innerHTML+=`
   <!-- TASK -->
                 <div class="task ${x.isDone?'done':''}">
                    <!--TASK INFO -->
                    <div style="width: 70%;">
                        <h2 id="title"> ${x.title}</h2>
                        <div>
                            <span class="material-symbols-outlined">
                                calendar_month
                            </span>
                            <span id="time">${x.date}</span>
                        </div>

                    </div>
                    <!--//TASK INFO// -->   

                    <!--TASK ACTION -->
                    <div  class="task-actions">
                        
                        ${x.isDone?`
                            <button class="cirular" style="background-color:red;color: white;">
                                <span onclick="doneTask(${index})" class="material-symbols-outlined">                               
                                    cancel
                                </span>   
                                </button>
                        ` : `
                            <button class="cirular" style="background-color:red;color: white;">
                            <span onclick="doneTask(${index})" class="material-symbols-outlined">
                                check
                            </span>   
                            </button>
                        `}
                        

                        <button class="cirular" style="background-color: green;color: white;">
                            <span onclick="deleteTask(${index})" class="material-symbols-outlined">
                                delete
                            </span>
                        </button>

                        <button class="cirular" style="background-color: chocolate;color: white;">
                            <span onclick="upoateTask(${index})" class="material-symbols-outlined">
                                edit
                            </span>
                            </button>
                        
                    </div>
                    <!--//TASK ACTION// -->

                 </div>
                
                 `
index++

}


}


//Ø¹Ø¯Ù„ÙŠÙ‡ Ù„Ø´ÙŠ Ø§Ø­Ø³Ù†
document.getElementById("addNew").addEventListener("click",function(){
    console.log("click already")
    const Etitle = prompt("Enter task title:");
    let Now= new Date()
    let Edate=Now.getDate()+"/"+(Now.getMonth()+1)+"/"+Now.getFullYear()
    
    //const Edate = prompt("Enter task date:");

    tasks.push({title:Etitle, date:Edate, isDone:false})
    
    //Ø­ÙØ¸
    storeTasks()
    fillTasksOnThePage()
})


function deleteTask(index){
    var confirmation = confirm("Do you want to delete: " + tasks[index].title + " ?")

    if(confirmation){
    tasks.splice(index,1);
    storeTasks()
    fillTasksOnThePage();
    }
}

function upoateTask(index){
    console.log(index)
    const newTitle=prompt("Enter the new title :",tasks[index].title)

    tasks[index].title = newTitle
    storeTasks()
    fillTasksOnThePage()
}

function doneTask(index){
    console.log(index)

    if(!tasks[index].isDone){
        tasks[index].isDone=true
        
        showGoodJob()
    }else{
        tasks[index].isDone=false
        
    }

    //alert("GOOD JOBE")

    

    //tasks.splice(index,1)
    storeTasks()
    fillTasksOnThePage()

}




function showGoodJob() {
    const popup = document.createElement("div");
    popup.textContent = "ðŸŽ‰ GOOD JOB! ðŸŽ‰";

    popup.style.position = "fixed";
    popup.style.top = "20%";
    popup.style.left = "50%";
    popup.style.transform = "translateX(-50%)";
    popup.style.backgroundColor = "gold";
    popup.style.color = "black";

    /* responsive sizes */
    popup.style.fontSize = "6vw";           // scales on mobile
    popup.style.fontWeight = "bold";
    popup.style.padding = "4% 6%";
    popup.style.maxWidth = "90%";           // prevents overflow
    popup.style.textAlign = "center";

    popup.style.borderRadius = "4%";
    popup.style.boxShadow = "0 5px 15px rgba(0,0,0,0.3)";
    popup.style.zIndex = "1000";

    popup.style.opacity = "0";
    popup.style.transition = "opacity 0.5s, transform 0.5s";

    document.body.appendChild(popup);

    requestAnimationFrame(() => {
        popup.style.opacity = "1";
        popup.style.transform = "translateX(-50%) translateY(-5%)";
    });

    setTimeout(() => {
        popup.style.opacity = "0";
        popup.style.transform = "translateX(-50%) translateY(-10%)";
        setTimeout(() => popup.remove(), 500);
    }, 2000);
}




///////////////// STORAGE FUNCTION/////////////////
function storeTasks(){
    let taskString=JSON.stringify(tasks)
    localStorage.setItem("myTasks",taskString)

}



</script>
</html>